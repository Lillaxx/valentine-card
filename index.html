<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>üíò Will you be my Valentine?</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">
    <style>
        :root{
          --bg1:#ffd6e8;
          --bg2:#fff3f8;
          --pink:#ff4d88;
          --pink2:#ff7bb0;
          --text:#2b2b2b;
        }
        *{ box-sizing:border-box; }

        html, body { height: 100%; }

html{
  position: relative;

  /* animated gradient */
  background: linear-gradient(
    120deg,
    #ffd6e8,   /* soft pink */
    #ffe6b3,   /* warm yellow */
    #ffb3d1,   /* rose */
    #fff0c2,   /* creamy yellow */
    #ffd6e8
  );
  background-size: 400% 400%;
  animation: gradientShift 18s ease-in-out infinite;
}
.great-vibes{
  font-family: 'Great Vibes', cursive;
  font-size: clamp(40px, 7vw, 54px);
  font-weight: 400;
  letter-spacing: 0.5px;
  color: #ff4d88;
  margin-bottom: 6px;
}
        /* Animated Gradient Overlay */
        html::before{
        content:"";
        position:fixed;
        inset:-80px;
        background:
            radial-gradient(circle at 15% 25%, rgba(255,77,136,.40), transparent 45%),
            radial-gradient(circle at 85% 30%, rgba(255,123,176,.34), transparent 52%),
            radial-gradient(circle at 55% 85%, rgba(255,255,255,.45), transparent 58%);
        filter: blur(14px);
        animation: floatBg 12s ease-in-out infinite alternate;
        z-index: 0;
        pointer-events:none;
        }

        body{
        margin:0;
        min-height:100vh;
        display:grid;
        place-items:center;
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
        color:var(--text);
        overflow:hidden;
        position: relative;
        }

        .card{
          width:min(680px, 92vw);
          padding:22px 18px;
          border-radius:22px;
          background: rgba(255,255,255,0.78);
          backdrop-filter: blur(8px);
          box-shadow: 0 14px 45px rgba(0,0,0,0.12);
          text-align:center;
          position:relative;
        }
        .card{ z-index: 1; }
        .hearts{ z-index: 999; }

        h1{
          margin:12px 0 8px;
          font-size: clamp(22px, 5vw, 36px);
          line-height:1.1;
        }
        p{
          margin:0 0 14px;
          font-size:16px;
          opacity:0.9;
        }

        .gif-wrap{
          display:flex;
          justify-content:center;
          margin-bottom:10px;
        }
        img.gif{
          width:min(360px, 82vw);
          max-height:48vh; /* adjust if needed */
          height:auto;
          object-fit:cover;
          border-radius:18px;
          box-shadow: 0 10px 26px rgba(0,0,0,0.12);
        }

        .btn-row{
          margin-top:14px;
          display:flex;
          justify-content:center;
          align-items:center;
          gap:12px;
          position:relative;
          height:90px;
        }

        button{
          border:0;
          padding:14px 18px;
          border-radius:999px;
          font-weight:800;
          font-size:16px;
          cursor:pointer;
          box-shadow: 0 10px 22px rgba(0,0,0,0.12);
          transition: transform .12s ease, opacity .2s ease;
          user-select:none;
          -webkit-tap-highlight-color: transparent;
        }
        #yes{
          background: linear-gradient(135deg, var(--pink), var(--pink2));
          color:white;
          min-width:128px;
        }
        #yes.grow{
  transform: scale(var(--yes-scale, 1));
}
        #no{
          background: rgba(255,255,255,0.98);
          color:#444;
          position:absolute;
          min-width:128px;
        }

        .result{
          margin-top:14px;
          font-size:18px;
          font-weight:700;
          opacity:0;
          transform: translateY(6px);
          transition: opacity .25s ease, transform .25s ease;
          min-height:24px;
        }
        .result.show{
          opacity:1;
          transform: translateY(0);
        }
        .small{
          margin-top:10px;
          font-size:12px;
          opacity:0.6;
        }

        /* hearts */
        .hearts{
          pointer-events:none;
          position:fixed;
          inset:0;
          display:none;
          z-index:999;
        }
        .heart{
          position:absolute;
          font-size:28px;
          animation: floatUp 1.7s ease-in forwards;
          filter: drop-shadow(0 10px 10px rgba(0,0,0,0.12));
        }
        @keyframes floatUp{
          from { transform: translateY(0) scale(1); opacity:1; }
          to   { transform: translateY(-160px) scale(1.7); opacity:0; }
        }

        .page{ display:none; }
        .page.active{ display:block; }

        .final-text{
  font-size: clamp(20px, 6vw, 26px); /* ausgewogen, nicht mehr zu gro√ü */
  font-weight: 800;
  line-height: 1.2;
  margin-top: 10px;
  letter-spacing: 0.2px;
}
        .yay-text{
  font-size: clamp(22px, 5vw, 30px);
  font-weight: 800;
  margin-bottom: 6px;
}
/* Mp3 Player styling */
.player{
  margin-top: 14px;
  padding: 12px 14px;
  border-radius: 18px;
  background: rgba(255,255,255,0.65);
  box-shadow: 0 10px 26px rgba(0,0,0,0.10);
  backdrop-filter: blur(6px);
}

.player-row{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:10px;
  flex-wrap:wrap;
}

.player-btn{
  border:0;
  padding:10px 14px;
  border-radius:999px;
  font-weight:800;
  cursor:pointer;
  background: linear-gradient(135deg, var(--pink), var(--pink2));
  color:#fff;
  box-shadow: 0 10px 22px rgba(0,0,0,0.12);
}

.player-label{
  font-size:12px;
  font-weight:700;
  opacity:0.8;
}

.player-vol{
  width: 140px;
}

.player-voltext{
  font-size:12px;
  font-weight:800;
  opacity:0.8;
  min-width: 38px;
  text-align:left;
}

        /* transition page spin-in */
        .spin-in{
           animation: spinIn 1s cubic-bezier(.2,.8,.2,1) both;
        }
        @keyframes spinIn{
            0%   { transform: rotate(-540deg) scale(0.75); opacity:0; }
            70%  { transform: rotate(20deg)   scale(1.03); opacity:1; }
            100% { transform: rotate(0deg)    scale(1);    opacity:1; }
        }

        .achievement{
  margin-top:10px;
  padding:8px 14px;
  display:inline-block;
  border-radius:999px;
  font-size:13px;
  font-weight:700;
  background: linear-gradient(135deg, #ffe08a, #ffcf40);
  color:#5a4300;
  box-shadow: 0 6px 18px rgba(0,0,0,.15);
  opacity:0;
  transform: translateY(6px) scale(0.95);
  transition: opacity .35s ease, transform .35s ease;
}

.achievement.show{
  animation: popAchievement .5s ease-out both;
}

@keyframes popAchievement{
  0%{ transform: scale(0.8); opacity:0; }
  70%{ transform: scale(1.05); }
  100%{ transform: scale(1); opacity:1; }
}
@keyframes gradientShift{
  0%   { background-position: 0% 50%; }
  50%  { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

@keyframes floatBg{
  0%   { transform: translate(0,0) scale(1); }
  100% { transform: translate(24px,-18px) scale(1.06); }
    }
    </style>
</head>

<body>
<div class="hearts" id="hearts"></div>

<!-- PAGE 1 -->
<main class="card page active" id="page1">
    <div class="gif-wrap">
        <img class="gif"
             src="assets/gifs/flowers.gif">
    </div>

    <h1 class="great-vibes">Hanna</h1>
    <h1>Will you be my Valentine? üíò</h1>


    <div class="btn-row" id="arena">
        <button id="yes">Yes üíñ</button>
        <button id="no">No üôÉ</button>
    </div>

    <div class="result" id="result"></div>
    <div class="small">PS: the ‚ÄúNo‚Äù button is a little shy today.</div>
    <div class="achievement" id="achievement">
        üèÖ Achievement unlocked: <strong>Teasing Expert üèÖ </strong>
    </div>
</main>

<!-- PAGE TRANSITION (spin-in gif) -->
<main class="card page" id="pageSpin">
    <div class="gif-wrap">
        <img class="gif spin-in" id="spinGif"
             src="assets/gifs/kittykiss.gif">
    </div>
    <h1 class="spin-in">Good Choice üíû</h1>
</main>

<!-- PAGE 2 -->
<main class="card page" id="page2">
    <div class="gif-wrap">
        <img class="gif"
             src="assets/gifs/fallinginlove.gif">
    </div>

    <h1 class="yay-text">Yay! üíñ</h1>
    <p class="final-text">Get dressed up ‚Äî we're going out! ü•≥</p>
    <div class="small">Cologne is waiting for you üòå I love you üíñ</div>
    <!-- Music Player (Yay Page) -->
    <div class="player" id="player">
        <div class="player-row">
            <button class="player-btn" id="playBtn" type="button">‚ñ∂Ô∏è Play</button>

            <label class="player-label" for="vol">Volume</label>
            <input id="vol" class="player-vol" type="range" min="0" max="1" step="0.01" value="0.25" />

            <span class="player-voltext" id="volText">25%</span>
        </div>

        <audio id="song" preload="auto" playsinline>
            <source src="./assets/Jungle%20-%20Tash%20Sultana%20(Official%20Audio).mp3" type="audio/mpeg">
        </audio>

        <div class="small" style="margin-top:12px; opacity:.8;">
        </div>
    </div>
</main>

<script>
    const noBtn = document.getElementById("no");
    const yesBtn = document.getElementById("yes");
    const arena = document.getElementById("arena");
    const result = document.getElementById("result");
    const hearts = document.getElementById("hearts");

    const page1 = document.getElementById("page1");
    const pageSpin = document.getElementById("pageSpin");
    const page2 = document.getElementById("page2");
    const achievement = document.getElementById("achievement");

    let noClicks = 0;
    let msgTimer;

    // used to avoid tiny jumps
    let lastPos = { x: null, y: null };
    let moveTimer = null;
    let isMovingScheduled = false;
    let yesScale = 1;

    // tweakables
    const MIN_JUMP_PX = 120;          // <-- bigger = less tiny jumps
    const DELAY_MIN_MS = 20;          // <-- minimal reaction delay
    const DELAY_MAX_MS = 160;         // <-- maximal reaction delay
    const SAFE_YES_MARGIN = 14;       // <-- keep "No" away from "Yes"

    const lines = [
      "nice try. but try again üôÇ",
      "nope. try again üôÇ",
      "wow‚Ä¶ you‚Äôre really committed üòÑ",
      "i could do this all day.",
      "i admire your persistence. unfortunately, no.",
      "are you testing my patience on purpose?",
      "why are you doing this to me?",
      "this is starting to feel personal.",
      "please stop bullying the poor button ü•∫",
      "okay wow. again?",
      "at this point i‚Äôm just impressed.",

      "the universe is gently whispering: yes.",
      "the no button would like a restraining order.",
      "i‚Äôm calling HR. this is harassment.",
      "you‚Äôre having way too much fun with this.",
      "we both know how this ends üòå"
    ];

    const extra = [,
      "the answer is still yes. just saying.",
      "i could do this all day.",
      "i could do this all day.",
      "i could do this all day.",
      "i could do this all day.",
      "i could do this all day.",
    ];

    function showMsg(text){
      result.textContent = text;
      result.classList.add("show");
      clearTimeout(msgTimer);
      msgTimer = setTimeout(() => result.classList.remove("show"), 1500);
    }

    function rectsOverlap(a,b){
      return !(a.right < b.left || a.left > b.right || a.bottom < b.top || a.top > b.bottom);
    }

    function dist(a, b){
      return Math.hypot(a.x - b.x, a.y - b.y);
    }

    function scheduleMoveNoButton(){
      if (isMovingScheduled) return; // prevent stacking multiple timers
      isMovingScheduled = true;

      const delay = DELAY_MIN_MS + Math.random() * (DELAY_MAX_MS - DELAY_MIN_MS);
      clearTimeout(moveTimer);
      moveTimer = setTimeout(() => {
        isMovingScheduled = false;
        moveNoButtonNow();
      }, delay);
    }

    function moveNoButtonNow(){
      const arenaRect = arena.getBoundingClientRect();
      const noRect = noBtn.getBoundingClientRect();
      const yesRect = yesBtn.getBoundingClientRect();

      const padding = 6;
      const minX = padding;
      const minY = padding;
      const maxX = arenaRect.width - noRect.width - padding;
      const maxY = arenaRect.height - noRect.height - padding;

      if (maxX <= minX || maxY <= minY) return;

      for(let i=0;i<50;i++){
        const x = minX + Math.random() * (maxX - minX);
        const y = minY + Math.random() * (maxY - minY);


        if (lastPos.x !== null) {
          const d = dist({x,y}, lastPos);
          if (d < MIN_JUMP_PX) continue;
        }

        const candidate = {
          left: arenaRect.left + x,
          right: arenaRect.left + x + noRect.width,
          top: arenaRect.top + y,
          bottom: arenaRect.top + y + noRect.height
        };

        const safeYes = {
          left: yesRect.left - SAFE_YES_MARGIN,
          right: yesRect.right + SAFE_YES_MARGIN,
          top: yesRect.top - SAFE_YES_MARGIN,
          bottom: yesRect.bottom + SAFE_YES_MARGIN
        };

        if(!rectsOverlap(candidate, safeYes)){
          noBtn.style.left = x + "px";
          noBtn.style.top  = y + "px";
          lastPos = { x, y };
          return;
        }
      }


      const x = minX + Math.random() * (maxX - minX);
      const y = minY + Math.random() * (maxY - minY);
      noBtn.style.left = x + "px";
      noBtn.style.top  = y + "px";
      lastPos = { x, y };
    }

    // Desktop
    noBtn.addEventListener("mouseenter", scheduleMoveNoButton);

    // Mobile: only when actually touching the button (with delay)
    noBtn.addEventListener("touchstart", (e) => {
      e.preventDefault();
      scheduleMoveNoButton();
    }, { passive:false });


    noBtn.addEventListener("click", (e) => {
      e.preventDefault();
      noClicks++;
      yesScale = Math.min(1.35, yesScale + 0.04);      // cap bei 1.35
        yesBtn.style.setProperty("--yes-scale", yesScale);
        yesBtn.classList.add("grow");
      // Achievement after 5 successful "No" clicks
    if (noClicks === 5) {
    achievement.classList.add("show");
    }

      if(noClicks <= lines.length) showMsg(lines[noClicks - 1]);
      else showMsg(extra[Math.floor(Math.random() * extra.length)]);

      scheduleMoveNoButton();
    });

    function spawnHearts(){
      hearts.innerHTML = "";
      hearts.style.display = "block";

      for(let i=0;i<26;i++){
        const h = document.createElement("span");
        h.className = "heart";
        h.textContent = ["üíñ","üíò","üíù","üíó","üíû"][Math.floor(Math.random()*5)];
        h.style.left = Math.random()*100 + "vw";
        h.style.top  = (Math.random()*60 + 30) + "vh";
        hearts.appendChild(h);
      }

      setTimeout(() => hearts.style.display="none", 2000);
    }

    function showPage(el){
      page1.classList.remove("active");
      pageSpin.classList.remove("active");
      page2.classList.remove("active");
      el.classList.add("active");
    }

    yesBtn.addEventListener("click", async () => {
    yesBtn.disabled = true;
    noBtn.disabled = true;
    yesBtn.style.opacity = "0.95";

    spawnHearts();

    // autoplay song on Yay flow
    try {
        song.currentTime = 0;
        await song.play();
        playBtn.textContent = "‚è∏Ô∏è Pause";
    } catch (e) {
        playBtn.textContent = "‚ñ∂Ô∏è Play";
    }

    setTimeout(() => showPage(pageSpin), 650);
    setTimeout(() => showPage(page2), 4550);
    });

    window.addEventListener("load", () => {
      moveNoButtonNow();
    });
// üéµ MP3 player logic (Yay Page)
const song = document.getElementById("song");
const playBtn = document.getElementById("playBtn");
const vol = document.getElementById("vol");
const volText = document.getElementById("volText");

function setVol(v){
  song.volume = v;
  vol.value = v;
  volText.textContent = Math.round(v * 100) + "%";
}

// default volume (20%)
setVol(0.2);

playBtn.addEventListener("click", async () => {
  if (song.paused) {
    try { await song.play(); } catch(e) {}
    playBtn.textContent = "‚è∏Ô∏è Pause";
  } else {
    song.pause();
    playBtn.textContent = "‚ñ∂Ô∏è Play";
  }
});

vol.addEventListener("input", () => setVol(parseFloat(vol.value)));

song.addEventListener("ended", () => {
  playBtn.textContent = "‚ñ∂Ô∏è Play";
});

</script>
</body>
</html>
